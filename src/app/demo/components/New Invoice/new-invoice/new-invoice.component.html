<div class="d-flex justify-content-center align-items-center ">
    <div *ngIf="!login" class="w-25 text-center">
        <label class="mb-2" for="loginType">Select Login Type:</label>
        <select class="form-control" [(ngModel)]="loginType" name="loginType" id="loginType">
            <option value="Citizen">Citizen</option>
            <option value="UnCitizen">UnCitizen</option>
        </select>

        <div>
            <button class="btn btn-primary mt-2" (click)="loginAsType()">Login</button>
        </div>
    </div>
</div>

<div *ngIf="login" class="container mt-4">
    <!-- Header Section -->
    <h1 class="text-gray text-center fw-bold mb-3">New Invoice : فاتوره جديده</h1>

    <div class="card ">
        <div class="row card-body d-flex justify-content-between flex-wrap">
            <span class="flex-fill col-md-4 col-sm-12"><span class="fw-bold">Name :</span><span> Mohamed Abd
                    El-Aziz</span></span>
            <span class="flex-fill col-md-4 col-sm-12"><span class="fw-bold">Phone :</span><span>
                    +201550377757</span></span>
            <span class="flex-fill col-md-4 col-sm-12"><span class="fw-bold">Insurance :</span><span> None</span></span>
        </div>
    </div>

    <!-- Invoice Table -->
    <div class="card mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between flex-wrap " style="direction: rtl;">

                <div class="form-group w-40 m-1 flex-fill ">
                    <select class="form-control" (change)="onServiceChange($event)" required>
                        <option value="" disabled selected>اسم الخدمة أو الكود</option>
                        <option *ngFor="let service of services" [value]="service.id">{{ service.name }}</option>
                    </select>
                </div>

                <div class="form-group w-40 m-1 flex-fill">
                    <select class="form-control" (change)="onClinicChange($event)" required>
                        <option value="" disabled selected>العيادة</option>
                        <option *ngFor="let clinic of clinics" [value]="clinic.id">{{ clinic.name }}</option>
                    </select>
                </div>
                <button (click)="addData()" class="btn btn-primary btn-block py-0">إضافة :
                    Add</button>


            </div>

            <table class="table mt-4 col-md-12" style="direction: rtl;">
                <thead class="thead-dark">
                    <tr>
                        <th>الخدمة : Service</th>
                        <th>الكود : Code</th>
                        <th>التصنيف : Category</th>
                        <th>السعر : Price</th>
                        <th>التأمين : Insurance</th>
                        <th>مسح : Delete</th>
                    </tr>
                </thead>
                <tbody class="text-black">
                    <tr *ngFor="let item of data">
                        <td>{{ getServiceName(item.serviceId) }}</td>
                        <td>{{ item.serviceId }}</td>
                        <td>{{ item.clinicId }}</td>
                        <td>{{ item.price }}</td>
                        <td>{{ item.insurance }}</td>
                        <td><button (click)="removeData(item)" class="delete-button border-none text-center bg-none">
                                <!-- Delete SVG Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red"
                                    class="bi bi-trash" viewBox="0 0 16 16">
                                    <path
                                        d="M5.5 5.5A.5.5 0 0 1 6 5h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5v-7zm1 0v7h3v-7h-3zM14 4.5V5h-1v9.5a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 14.5V5H2v-.5a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1zM5.5 4h5a.5.5 0 0 1 .5.5V5H5v-.5a.5.5 0 0 1 .5-.5zm2-1a1 1 0 0 1 1 1h-3a1 1 0 0 1 1-1h1z" />
                                </svg>

                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>

    <div class="card mb-4" style="direction: rtl;">

        <h5 class="text-bold">تفاصيل الفاتوره :</h5>
        <div class="d-flex justify-content-between">
            <p>الخصم : </p>
            <span>{{discount}} رس </span>

        </div>
        <div class="d-flex justify-content-between">
            <p>الضريبه : </p>
            <span>{{taxes}} رس </span>

        </div>
        <div class="d-flex justify-content-between">
            <p>الاجمالي : </p>
            <span>{{total}} رس </span>

        </div>
        <div class="d-flex justify-content-between">
            <p>التامين : </p>
            <span>{{discount}} رس </span>

        </div>
        <div class="d-flex justify-content-between">
            <p>المريض : </p>
            <span>{{patientPay}} رس </span>

        </div>

    </div>


    <div class="card mb-4" style="direction: rtl;">
        <div class="card-body">
            <div class="d-flex flex-wrap justify-content-between">
                <div class="form-group w-100 w-md-50">
                    <input #myTitle (keyup)="keyup(myTitle.value)" type="text" id="cashPayment" class="form-control"
                        placeholder="ادخل المبلغ المدفوع نقدًا" />
                </div>
                <p class="w-100 mt-2">{{ message }}</p>
            </div>

            <div class="d-flex flex-wrap justify-content-between mt-3">
                <div class="form-group w-100 w-md-50">
                    <label for="creditCard">بطاقه الدفع credit card</label>
                    <input type="text" id="creditCard" class="form-control" placeholder="" />
                </div>

                <div class="form-group w-100 w-md-50 mt-3">
                    <select class="form-control" id="creditCardType">
                        <option value="1">مدي</option>
                        <option value="2">تمارا</option>
                        <option value="3">فيزا</option>
                        <option value="4">تالي</option>
                        <option value="5">ماستر كارد</option>
                    </select>
                </div>
            </div>

            <div class="d-flex flex-wrap justify-content-between mt-3">
                <div class="form-group w-100 w-md-50">
                    <label for="bankTransfer">تحويل بنكي</label>
                    <input type="text" id="bankTransfer" class="form-control" placeholder="" />
                </div>

                <div class="form-group w-100 w-md-50 mt-3">
                    <select class="form-control" id="bankTransferType">
                        <option value="1">مصرف الراجحي</option>
                    </select>
                </div>
            </div>

            <div class="form-group mt-3">
                <label for="startDate">تاريخ بداية التقويم</label>
                <input type="date" id="startDate" class="form-control" />
            </div>
        </div>
    </div>

    <!-- Footer Section -->
    <div class="d-flex justify-content-center mt-5 flex-wrap">
        <button class="btn btn-warning m-3">Reset</button>
        <button class="btn btn-success m-3">تحويل المريض</button>
    </div>
</div>